---
import Layout from "@/layouts/Layout.astro";
import { getCollection } from 'astro:content';
const allPosts = await getCollection("posts", ({ data }) => {
  return import.meta.env.PROD ? data.status === "published" : true;
});
const posts = allPosts.sort((a, b) => 
  b.data.date.localeCompare(a.data.date)
);
---

<Layout>
<ul>
	{posts.map((post) => (
	<li>
	  <a href={`/posts/${post.id}`}>
		{post.data.title}
		{post.data.status !== 'published' && <span>({post.data.status})</span>}
	  </a>
	  <time>{post.data.date}</time>
	</li>
  ))}
</ul>
</Layout>

<style>
  li {
    display: flex;
    align-items: center;
  }
  
  time {
    margin-left: auto;
  }
</style>
